apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: jenkins-home
  namespace: jenkins
  labels:
    app: jenkins-controller
    component: storage
spec:
  # Access mode: ReadWriteMany allows multiple pods to mount the volume
  # Requirement 6.9: Persistent volume SHALL use ReadWriteMany access mode
  # Requirement 3.2: Jenkins controller SHALL use persistent volume backed by EFS
  accessModes:
  - ReadWriteMany
  
  # Storage class: efs-sc (EFS CSI Driver storage class)
  # Requirement 6.1: Persistent volume SHALL use EFS as storage backend
  storageClassName: efs-sc
  
  # Storage request: 100Gi (symbolic size, EFS grows automatically)
  # Requirement 3.2: Mount to /var/jenkins_home
  resources:
    requests:
      storage: 100Gi
