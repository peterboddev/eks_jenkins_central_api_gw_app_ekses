apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig

metadata:
  name: nginx-api-cluster
  region: us-west-2

# IMPORTANT: Replace VPC_ID and SUBNET_IDs with your actual values before using
# To get these values, run:
# VPC_ID: aws cloudformation describe-stacks --stack-name NginxApiNetworkStack --query "Stacks[0].Outputs[?ExportName=='NginxApiNetworkVpcId'].OutputValue" --output text --region us-west-2
# SUBNET_IDs: aws ec2 describe-subnets --filters "Name=vpc-id,Values=VPC_ID" "Name=tag:aws-cdk:subnet-type,Values=Private" --query "Subnets[*].[AvailabilityZone,SubnetId]" --output table --region us-west-2

vpc:
  id: VPC_ID
  subnets:
    private:
      us-west-2a:
        id: SUBNET_ID_AZ_A
      us-west-2b:
        id: SUBNET_ID_AZ_B

managedNodeGroups:
  - name: karpenter-bootstrap
    instanceType: t3.small
    minSize: 1
    maxSize: 1
    desiredCapacity: 1
    privateNetworking: true
    labels:
      role: karpenter-bootstrap
    tags:
      Name: karpenter-bootstrap-node
